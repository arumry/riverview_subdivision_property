---
import Layout from "../layouts/Layout.astro";
import 'photoswipe/style.css';

const services = [
  {
    title: "Construction",
    description:
      "Building from scratch or making additions with expert craftsmanship.",
    icon: "üèóÔ∏è",
  },
  {
    title: "Architectural Design", 
    description:
      "Meticulously crafted floor plans and 3D visuals to bring your vision to life.",
    icon: "üìê",
  },
  {
    title: "Project Consulting",
    description: "Expert guidance through every construction phase.",
    icon: "üìã",
  },
  {
    title: "Real Estate Development",
    description: "Maximizing property potential and investment returns.",
    icon: "üèòÔ∏è",
  },
];

const floorPlanPartners = [
  {
    name: "HousePlans.com",
    description:
      "Extensive collection of mountain home designs optimized for scenic views.",
    features: [
      "View-optimized layouts",
      "Mountain architectural styles", 
      "Customizable plans",
    ],
    url: "https://www.houseplans.com",
  },
  {
    name: "TheHouseDesigners.com",
    description: "Luxury home plans perfect for our premium lots.",
    features: [
      "Award-winning designs",
      "Energy-efficient options",
      "Virtual walkthroughs",
    ],
    url: "https://www.thehousedesigners.com",
  },
  {
    name: "DreamHomeSource.com",
    description: "Contemporary designs that embrace natural surroundings.",
    features: [
      "Modern floor plans",
      "Indoor-outdoor living",
      "Flexible spaces",
    ],
    url: "https://www.dreamhomesource.com",
  },
];

const pastBuilds = [
  {
    src: '/images/1.webp',
    width: 1200,
    height: 800,
    alt: 'Custom Mountain Home'
  },
  {
    src: '/images/2.webp', 
    width: 1200,
    height: 800,
    alt: 'Custom Ranch Home'
  },
  {
    src: '/images/3.webp',
    width: 1200,
    height: 800,
    alt: 'Custom Mountain Home'
  },
  {
    src: '/images/4.webp',
    width: 1200,
    height: 800,
    alt: 'Custom Mountain Home'
  },
  {
    src: '/images/5.webp',
    width: 1200,
    height: 800,
    alt: 'Custom Garage'
  },
  {
    src: '/images/6.webp',
    width: 1200,
    height: 800,
    alt: 'ICF Construction'
  }
];
---

<Layout title="About Our Builder">
  <div class="pt-24 pb-12">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto">
        <div class="flex justify-center mb-12">
          <a href="https://cornerstoneconstruction.builders" target="_blank" rel="noopener noreferrer">
            <img 
              src="/images/cornerstone_logo.webp"
              alt="Cornerstone Construction LLC Logo"
              class="h-32 w-auto"
            />
          </a>
        </div>

        <div class="prose prose-lg mx-auto mb-12">
          <p class="text-xl text-center mb-8">
            Four decades of unwavering commitment to construction mastery.
            Serving northern New Hampshire.
          </p>

          <div class="bg-white rounded-lg shadow-lg p-8 mb-12">
            <h2 class="text-2xl font-bold mb-4">Who We Are</h2>
            <p>
              Headquartered in Manchester, with a remote office in Littleton,
              NH, Cornerstone Construction delivers expert building services to
              residential and commercial clients throughout northern New
              Hampshire.
            </p>
            <p class="mt-4">
              Our journey in construction is driven by a genuine love for
              bringing visions to life. We're dedicated to creating spaces that
              aren't just built to last, but are designed to be loved, lived in,
              and cherished.
            </p>
          </div>

          <div class="mb-12">
            <h2 class="text-3xl font-bold text-center mb-8">Past Projects</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="gallery">
              {pastBuilds.map((image) => (
                <a
                  href={image.src}
                  data-pswp-width={image.width}
                  data-pswp-height={image.height}
                  class="gallery-item block rounded-lg overflow-hidden shadow-lg hover:shadow-xl transition-shadow"
                >
                  <img
                    src={image.src}
                    alt={image.alt}
                    class="w-full h-64 object-cover"
                    loading="lazy"
                  />
                  <div class="p-4 bg-white">
                    <p class="text-gray-800 truncate">{image.alt}</p>
                  </div>
                </a>
              ))}
            </div>
          </div>

          <div class="grid md:grid-cols-2 gap-8 mb-12">
            <div class="bg-white rounded-lg shadow-lg p-6">
              <div class="flex items-center mb-4">
                <img 
                  src="/images/dave.webp" 
                  alt="Dave Reilly"
                  class="w-24 h-24 rounded-full object-cover mr-4 border-2 border-primary-600"
                />
                <div>
                  <h3 class="text-xl font-bold">Dave Reilly</h3>
                  <p class="text-gray-600 text-sm">Co-founder</p>
                </div>
              </div>
              <p class="text-gray-600">
                Co-founder with over forty years of experience mastering every
                aspect of construction, from laying foundations to the final
                touches.
              </p>
            </div>
            <div class="bg-white rounded-lg shadow-lg p-6">
              <div class="flex items-center mb-4">
                <img 
                  src="/images/aaron.webp" 
                  alt="Aaron Rumery"
                  class="w-24 h-24 rounded-full object-cover mr-4 border-2 border-primary-600"
                />
                <div>
                  <h3 class="text-xl font-bold">Aaron Rumery</h3>
                  <p class="text-gray-600 text-sm">Co-founder</p>
                </div>
              </div>
              <p class="text-gray-600">
                Co-founder known for his strategic vision and exceptional
                project management skills.
              </p>
            </div>
          </div>

          <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
            {
              services.map((service) => (
                <div class="bg-white rounded-lg shadow-lg p-6 text-center">
                  <div class="text-4xl mb-4">{service.icon}</div>
                  <h3 class="font-bold mb-2">{service.title}</h3>
                  <p class="text-sm text-gray-600">{service.description}</p>
                </div>
              ))
            }
          </div>

          <div class="bg-gray-50 rounded-lg p-8 mb-12">
            <h2 class="text-3xl font-bold text-center mb-8">
              Floor Plan Partners
            </h2>
            <p class="text-center text-gray-600 mb-12">
              We've partnered with leading home plan providers to offer you an
              extensive selection of designs perfectly suited for our mountain
              view lots. Choose from their collections or let us help you
              customize a plan to your exact specifications.
            </p>

            <div class="grid md:grid-cols-3 gap-8 mb-12">
              {
                floorPlanPartners.map((partner) => (
                  <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col">
                    <div class="flex-1">
                      <h3 class="text-xl font-bold mb-3 truncate">
                        {partner.name}
                      </h3>
                      <p class="text-gray-600 mb-4">{partner.description}</p>
                      <ul class="space-y-2 mb-6">
                        {partner.features.map((feature) => (
                          <li class="flex items-start">
                            <svg
                              class="w-5 h-5 text-primary-600 mr-2 mt-1"
                              fill="none"
                              stroke="currentColor"
                              viewBox="0 0 24 24"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M5 13l4 4L19 7"
                              />
                            </svg>
                            <span class="text-sm">{feature}</span>
                          </li>
                        ))}
                      </ul>
                    </div>
                    <a
                      href={partner.url}
                      target="_blank"
                      rel="noopener noreferrer"
                      class="text-primary-600 hover:text-primary-700 font-semibold text-sm"
                    >
                      Browse Plans ‚Üí
                    </a>
                  </div>
                ))
              }
            </div>

            <div class="text-center mt-8">
              <a
                href="https://cornerstoneconstruction.builders/"
                target="_blank"
                rel="noopener noreferrer"
                class="inline-block bg-primary-600 hover:bg-primary-700 text-white px-8 py-3 rounded-lg text-lg font-semibold transition-colors"
              >
                Visit Builder's Website
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</Layout>

<script>
  import PhotoSwipe from 'photoswipe';

  const initPhotoSwipe = () => {
    const gallery = document.querySelector('#gallery');
    let pswp = null;

    gallery.addEventListener('click', (e) => {
      e.preventDefault();

      const target = e.target.closest('.gallery-item');
      if (!target) return;

      const items = Array.from(document.querySelectorAll('.gallery-item')).map(element => ({
        src: element.href,
        w: parseInt(element.dataset.pswpWidth, 10),
        h: parseInt(element.dataset.pswpHeight, 10),
        alt: element.querySelector('img').alt
      }));

      const options = {
        dataSource: items,
        index: Array.from(document.querySelectorAll('.gallery-item')).indexOf(target),
        showHideAnimationType: 'fade',
        bgOpacity: 0.9,
        showHideOpacity: true
      };

      pswp = new PhotoSwipe(options);
      pswp.init();
    });
  };

  document.addEventListener('DOMContentLoaded', initPhotoSwipe);
</script>
